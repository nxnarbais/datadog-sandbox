{"title":"TPS Confluence Stats","description":"[[suggested_dashboards]]","widgets":[{"id":456991101083926,"definition":{"type":"note","content":"# Confluence Stats\n\nThis dashboard aims to present the Confluence stats as metrics.\n\n[script](#) - currently private","background_color":"white","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":5,"height":3}},{"id":1238745714139528,"definition":{"type":"note","content":"# Potential use cases\n\n- Identify trends\n- Check which content works better\n- Review content often seen\n- Identify pages worth to archive or delete","background_color":"white","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":5,"y":0,"width":4,"height":3}},{"id":3551960403887338,"definition":{"title":"Views per week","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"formulas":[{"formula":"query1 - week_before(query2)"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:confluence.pages.views{$space,$team,$label} by {space,status}"},{"data_source":"metrics","name":"query2","query":"sum:confluence.pages.views{$space,$team,$label} by {space,status}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":9,"y":0,"width":3,"height":3}},{"id":4777196432428480,"definition":{"title":"Global Views","background_color":"purple","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":6644743431247774,"definition":{"title":"Most viewed pages this week","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"views","formula":"query1 - week_before(query3)","limit":{"count":500,"order":"desc"}},{"alias":"viewers","formula":"query2 - week_before(query4)"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:confluence.pages.views{$space,$team,$label} by {space,title,status,label}","aggregator":"max"},{"data_source":"metrics","name":"query3","query":"avg:confluence.pages.views{$space,$team,$label} by {space,title,status,label}","aggregator":"max"},{"data_source":"metrics","name":"query2","query":"avg:confluence.pages.viewers{$space,$team,$label} by {space,title,status,label}","aggregator":"max"},{"data_source":"metrics","name":"query4","query":"avg:confluence.pages.viewers{$space,$team,$label} by {space,title,status,label}","aggregator":"max"}]}]},"layout":{"x":0,"y":0,"width":6,"height":5}},{"id":1292784675274268,"definition":{"title":"Most viewed pages this month","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"views","formula":"query1 - month_before(query3)","limit":{"count":500,"order":"desc"}},{"alias":"viewers","formula":"query2 - month_before(query4)"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:confluence.pages.views{$space,$team,$label} by {space,title,status,label}","aggregator":"max"},{"data_source":"metrics","name":"query3","query":"avg:confluence.pages.views{$space,$team,$label} by {space,title,status,label}","aggregator":"max"},{"data_source":"metrics","name":"query2","query":"avg:confluence.pages.viewers{$space,$team,$label} by {space,title,status,label}","aggregator":"max"},{"data_source":"metrics","name":"query4","query":"avg:confluence.pages.viewers{$space,$team,$label} by {space,title,status,label}","aggregator":"max"}]}]},"layout":{"x":6,"y":0,"width":6,"height":5}}]},"layout":{"x":0,"y":3,"width":12,"height":6}},{"id":7078553056867394,"definition":{"title":"Single Page Analytics","background_color":"purple","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":5693966301073606,"definition":{"type":"note","content":"## Analytics on a single page\n\n*Instructions: To make this section, select a page title in the template variable.*","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":2,"height":6}},{"id":8186139412513974,"definition":{"title":"Views","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"views","formula":"monotonic_diff(query1)"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:confluence.pages.views{$title,$label} by {space,title,label,versionnumber}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true}},"layout":{"x":2,"y":0,"width":5,"height":3}},{"id":3066797483133182,"definition":{"title":"New viewers","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"monotonic_diff(query1)"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:confluence.pages.viewers{$title,$label} by {space,title,label,versionnumber}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true}},"layout":{"x":7,"y":0,"width":5,"height":3}},{"id":3567289180459616,"definition":{"title":"Update count","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1 - week_before(query2)"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:confluence.pages.version_count{$title,$label} by {space,title,label,versionnumber}"},{"data_source":"metrics","name":"query2","query":"sum:confluence.pages.version_count{$title,$label} by {space,title,label,versionnumber}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true}},"layout":{"x":2,"y":3,"width":5,"height":3}}]},"layout":{"x":0,"y":9,"width":12,"height":1}},{"id":4194936958187388,"definition":{"title":"TAM Activity","background_color":"purple","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":2630964280087906,"definition":{"type":"note","content":"## TAM Activity\n\nThe TAM activities range through a large set of tasks. Those have been listed in [this page](https://datadoghq.atlassian.net/wiki/spaces/TEMTAM/pages/3166634861/TPS+Checklist) to make it easy for new TAMs to discover mandatory and optional activities. \n\nNotes:\n\n- Pages with a number of views in the past month `< 5` should be reviewed (light red). Check the process [here](#).","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":3,"height":8}},{"id":8874009494426690,"definition":{"title":"Most viewed pages this month","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"views","formula":"query1 - month_before(query3)","limit":{"count":500,"order":"desc"}},{"alias":"viewers","formula":"query2 - month_before(query4)"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:confluence.pages.views{$space,$team,label:tam_activity,$label} by {space,title,status,label}","aggregator":"max"},{"data_source":"metrics","name":"query3","query":"avg:confluence.pages.views{$space,$team,label:tam_activity,$label} by {space,title,status,label}","aggregator":"max"},{"data_source":"metrics","name":"query2","query":"avg:confluence.pages.viewers{$space,$team,label:tam_activity,$label} by {space,title,status,label}","aggregator":"max"},{"data_source":"metrics","name":"query4","query":"avg:confluence.pages.viewers{$space,$team,label:tam_activity,$label} by {space,title,status,label}","aggregator":"max"}]}]},"layout":{"x":3,"y":0,"width":9,"height":4}},{"id":4975666751689544,"definition":{"title":"Least viewed pages this month","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"views","formula":"query1 - month_before(query3)","limit":{"count":25,"order":"asc"},"conditional_formats":[{"comparator":"<","palette":"black_on_light_red","value":5}]},{"alias":"viewers","formula":"query2 - month_before(query4)"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:confluence.pages.views{$space,$team,label:tam_activity,$label} by {space,title,status,label}","aggregator":"max"},{"data_source":"metrics","name":"query3","query":"avg:confluence.pages.views{$space,$team,label:tam_activity,$label} by {space,title,status,label}","aggregator":"max"},{"data_source":"metrics","name":"query2","query":"avg:confluence.pages.viewers{$space,$team,label:tam_activity,$label} by {space,title,status,label}","aggregator":"max"},{"data_source":"metrics","name":"query4","query":"avg:confluence.pages.viewers{$space,$team,label:tam_activity,$label} by {space,title,status,label}","aggregator":"max"}]}]},"layout":{"x":3,"y":4,"width":9,"height":4}}]},"layout":{"x":0,"y":10,"width":12,"height":1}},{"id":4695856995349032,"definition":{"title":"Customer Pages (not) Updated","background_color":"purple","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":6587516401586330,"definition":{"type":"note","content":"## Check pages with no update\n\nEvery customer page with an active TAM should be updated at least once a month. \n\nCurrently, the table is scoped on `label:emea, label:customer`.\n\nPotential ideas of extension:\n\n- Scope to the `label:main_customer_page` to exclude all the child pages.\n- Scope to `!label:archive` to exclude the non active TAM accounts.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":3,"height":4}},{"id":1391696889867752,"definition":{"title":"Updates this month","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"latest version","formula":"query1"},{"alias":"first version of the period","formula":"query5"},{"alias":"update count","formula":"query1 - query5","limit":{"count":25,"order":"asc"},"conditional_formats":[{"comparator":"<=","palette":"white_on_red","value":0}]}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:confluence.pages.version_count{$space,$team,label:customer,label:emea,$label} by {space,title,status,label}","aggregator":"max"},{"data_source":"metrics","name":"query5","query":"sum:confluence.pages.version_count{$space,$team,label:customer,label:emea,$label} by {space,title,status,label}","aggregator":"min"}]}]},"layout":{"x":3,"y":0,"width":9,"height":4}}]},"layout":{"x":0,"y":11,"width":12,"height":1}},{"id":4823307592856434,"definition":{"title":"Maintenance","background_color":"purple","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":4079058029441460,"definition":{"type":"note","content":"## Maintenance\n\nThe maintenance of a documentation space is important to remove outdated content or schedule a review.","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":3,"height":8}},{"id":5162839963693338,"definition":{"title":"Pages not updated over the time period selected","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"latest version","formula":"query1"},{"alias":"first version of the period","formula":"query5"},{"alias":"update count","conditional_formats":[{"comparator":"<=","palette":"white_on_red","value":0}],"formula":"query1 - query5","limit":{"count":25,"order":"asc"}}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:confluence.pages.version_count{$space,$team,$label} by {space,title,status,label}","aggregator":"max"},{"data_source":"metrics","name":"query5","query":"sum:confluence.pages.version_count{$space,$team,$label} by {space,title,status,label}","aggregator":"min"}]}]},"layout":{"x":3,"y":0,"width":9,"height":4}},{"id":3448492579698654,"definition":{"title":"Pages without pageviews over a quarter","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"formula":"query1"},{"formula":"week_before(query5)"},{"formula":"month_before(query2)"},{"formula":"month_before(month_before(month_before(query3)))"},{"conditional_formats":[{"comparator":"<=","palette":"white_on_red","value":0}],"alias":"views (1 week)","formula":"query1 - week_before(query5)"},{"alias":"views (1 month)","formula":"query1 - month_before(query2)"},{"alias":"views (3 months)","formula":"query1","limit":{"count":500,"order":"desc"}}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:confluence.pages.views{$space,$team,$label} by {space,title,status,label}","aggregator":"max"},{"data_source":"metrics","name":"query5","query":"sum:confluence.pages.views{$space,$team,$label} by {space,title,status,label}","aggregator":"max"},{"data_source":"metrics","name":"query2","query":"sum:confluence.pages.views{$space,$team,$label} by {space,title,status,label}","aggregator":"max"},{"data_source":"metrics","name":"query3","query":"sum:confluence.pages.views{$space,$team,$label} by {space,title,status,label}","aggregator":"max"}]}]},"layout":{"x":3,"y":4,"width":9,"height":4}}]},"layout":{"x":0,"y":12,"width":12,"height":1}},{"id":8392612400974356,"definition":{"title":"Random","background_color":"purple","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":7836209984303016,"definition":{"type":"note","content":"## Use cases\n\nSome examples of use cases of interest\n\n- [DONE] Identify pages with no activity\n    - Is the content still relevant\n    - Is the content up to date\n- Why have pages more activities? --> Identify success criteria of a doc\n- Tagging management\n    - Which page does not have tags?\n- [DONE] Single page analytics\n- [DONE] Customer page analytics\n- [DONE] tam_activity analytics","background_color":"gray","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":0,"y":0,"width":4,"height":6}},{"id":73890525843602,"definition":{"title":"Pages with selected author name (first author)","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"version","formula":"count_not_null(query3)"}],"queries":[{"data_source":"metrics","name":"query3","query":"max:confluence.pages.views{$space,$team,$label, $versionauthorname} by {space,title,status}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":0,"width":4,"height":3}},{"id":9004705329258002,"definition":{"title":"Label popularity through time","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"version","formula":"count_not_null(query3)"}],"queries":[{"data_source":"metrics","name":"query3","query":"max:confluence.pages.views{$space,$team,$label} by {space,title,status,versioncreatedat}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":0,"width":4,"height":3}},{"id":7798857991686652,"definition":{"title":"Pages with selected author name (first author)","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"formulas":[{"alias":"version","formula":"count_not_null(query3)"}],"queries":[{"data_source":"metrics","name":"query3","query":"max:confluence.pages.views{$space,$team,$authorname,$label} by {space,title,status,versioncreatedat}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":3,"width":4,"height":3}},{"id":3050107052696486,"definition":{"title":"Most edited pages","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"views","formula":"query1"},{"alias":"viewers","formula":"query2"},{"alias":"version","formula":"query3","limit":{"count":500,"order":"desc"}}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:confluence.pages.views{$space,$team,$label} by {space,title,status}","aggregator":"max"},{"data_source":"metrics","name":"query2","query":"avg:confluence.pages.viewers{$space,$team,$label} by {space,title,status}","aggregator":"max"},{"data_source":"metrics","name":"query3","query":"avg:confluence.pages.version_count{$space,$team,$label} by {space,title,status}","aggregator":"max"}]}]},"layout":{"x":8,"y":3,"width":4,"height":3}}]},"layout":{"x":0,"y":13,"width":12,"height":1}}],"template_variables":[{"name":"team","prefix":"team","available_values":[],"default":"tps"},{"name":"space","prefix":"space","available_values":[],"default":"*"},{"name":"label","prefix":"label","available_values":[],"default":"*"},{"name":"authorname","prefix":"authorname","available_values":[],"default":"*"},{"name":"versionauthorname","prefix":"versionauthorname","available_values":[],"default":"*"},{"name":"title","prefix":"title","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed","tags":["team:tps"]}